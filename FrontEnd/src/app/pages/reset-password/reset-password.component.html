<div class="auth-container fade-in">
    <h2>Réinitialiser le mot de passe</h2>

    <div *ngIf="message" class="success">
        <i class="fas fa-check-circle"></i> {{ message }}
    </div>

    <form (ngSubmit)="onSubmit()" *ngIf="!message && email">
        <div class="form-group">
            <label>Nouveau mot de passe</label>
            <div class="password-wrapper">
                <input [type]="showPassword ? 'text' : 'password'" [(ngModel)]="password" name="password" required
                    minlength="6">
                <button type="button" class="btn-toggle-password" (click)="togglePassword()">
                    <i class="fas" [class.fa-eye]="!showPassword" [class.fa-eye-slash]="showPassword"></i>
                </button>
            </div>
        </div>

        <div class="form-group">
            <label>Confirmer le mot de passe</label>
            <div class="password-wrapper">
                <input [type]="showConfirmPassword ? 'text' : 'password'" [(ngModel)]="confirmPassword"
                    name="confirmPassword" required>
                <button type="button" class="btn-toggle-password" (click)="toggleConfirmPassword()">
                    <i class="fas" [class.fa-eye]="!showConfirmPassword" [class.fa-eye-slash]="showConfirmPassword"></i>
                </button>
            </div>
        </div>

        <div class="error" *ngIf="error">
            <i class="fas fa-exclamation-circle"></i> {{ error }}
        </div>

        <button type="submit" class="btn-primary" [disabled]="isLoading || !password || !confirmPassword">
            <span *ngIf="!isLoading">Réinitialiser le mot de passe</span>
            <span *ngIf="isLoading"><i class="fas fa-spinner fa-spin"></i> Traitement...</span>
        </button>
    </form>

    <div *ngIf="!email" class="error">
        Lien invalide ou expiré. Veuillez demander un nouveau lien de réinitialisation.
    </div>
</div>