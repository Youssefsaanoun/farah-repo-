import{b as R,d as I}from"./chunk-J25QG7CS.js";import{a as q}from"./chunk-FZA2A4RH.js";import{a as E,c as V,d as O,e as T,f as k,g as L,n as N,o as A,s as W}from"./chunk-GGHP7TD5.js";import{$a as h,Ea as w,Hb as M,Ka as d,La as i,Ma as n,Mb as S,Na as u,S as l,Sa as y,T as c,Ta as _,Ua as m,bb as p,db as x,gb as C,hb as P,ib as v,oa as o,va as g,za as b}from"./chunk-OXYRPRF3.js";import"./chunk-FDERIQAA.js";function j(t,s){if(t&1&&(i(0,"div",4),u(1,"i",5),p(2),n()),t&2){let e=m();o(2),x(" ",e.message," ")}}function z(t,s){if(t&1&&(i(0,"div",15),u(1,"i",16),p(2),n()),t&2){let e=m(2);o(2),x(" ",e.error," ")}}function F(t,s){t&1&&(i(0,"span"),p(1,"R\xE9initialiser le mot de passe"),n())}function B(t,s){t&1&&(i(0,"span"),u(1,"i",17),p(2," Traitement..."),n())}function G(t,s){if(t&1){let e=y();i(0,"form",6),_("ngSubmit",function(){l(e);let r=m();return c(r.onSubmit())}),i(1,"div",7)(2,"label"),p(3,"Nouveau mot de passe"),n(),i(4,"div",8)(5,"input",9),v("ngModelChange",function(r){l(e);let f=m();return P(f.password,r)||(f.password=r),c(r)}),n(),i(6,"button",10),_("click",function(){l(e);let r=m();return c(r.togglePassword())}),u(7,"i",11),n()()(),i(8,"div",7)(9,"label"),p(10,"Confirmer le mot de passe"),n(),i(11,"div",8)(12,"input",12),v("ngModelChange",function(r){l(e);let f=m();return P(f.confirmPassword,r)||(f.confirmPassword=r),c(r)}),n(),i(13,"button",10),_("click",function(){l(e);let r=m();return c(r.toggleConfirmPassword())}),u(14,"i",11),n()()(),w(15,z,3,1,"div",3),i(16,"button",13),w(17,F,2,0,"span",14)(18,B,3,0,"span",14),n()()}if(t&2){let e=m();o(5),d("type",e.showPassword?"text":"password"),C("ngModel",e.password),o(2),h("fa-eye",!e.showPassword)("fa-eye-slash",e.showPassword),o(5),d("type",e.showConfirmPassword?"text":"password"),C("ngModel",e.confirmPassword),o(2),h("fa-eye",!e.showConfirmPassword)("fa-eye-slash",e.showConfirmPassword),o(),d("ngIf",e.error),o(),d("disabled",e.isLoading||!e.password||!e.confirmPassword),o(),d("ngIf",!e.isLoading),o(),d("ngIf",e.isLoading)}}function Y(t,s){t&1&&(i(0,"div",15),p(1," Lien invalide ou expir\xE9. Veuillez demander un nouveau lien de r\xE9initialisation. "),n())}var D=class t{constructor(s,e,a){this.route=s;this.authService=e;this.router=a}password="";confirmPassword="";email="";error="";message="";isLoading=!1;showPassword=!1;showConfirmPassword=!1;ngOnInit(){this.route.queryParams.subscribe(s=>{this.email=s.email,this.email||(this.error="Invalid password reset link.")})}togglePassword(){this.showPassword=!this.showPassword}toggleConfirmPassword(){this.showConfirmPassword=!this.showConfirmPassword}onSubmit(){if(this.password!==this.confirmPassword){this.error="Les mots de passe ne correspondent pas.";return}this.isLoading=!0,this.error="",this.authService.resetPassword(this.email,this.password).subscribe({next:()=>{this.message="Mot de passe r\xE9initialis\xE9 avec succ\xE8s ! Redirection vers la connexion...",setTimeout(()=>{this.router.navigate(["/login"])},3e3)},error:s=>{this.error="\xC9chec de la r\xE9initialisation du mot de passe. Veuillez r\xE9essayer.",this.isLoading=!1}})}static \u0275fac=function(e){return new(e||t)(g(R),g(q),g(I))};static \u0275cmp=b({type:t,selectors:[["app-reset-password"]],decls:6,vars:3,consts:[[1,"auth-container","fade-in"],["class","success",4,"ngIf"],[3,"ngSubmit",4,"ngIf"],["class","error",4,"ngIf"],[1,"success"],[1,"fas","fa-check-circle"],[3,"ngSubmit"],[1,"form-group"],[1,"password-wrapper"],["name","password","required","","minlength","6",3,"ngModelChange","type","ngModel"],["type","button",1,"btn-toggle-password",3,"click"],[1,"fas"],["name","confirmPassword","required","",3,"ngModelChange","type","ngModel"],["type","submit",1,"btn-primary",3,"disabled"],[4,"ngIf"],[1,"error"],[1,"fas","fa-exclamation-circle"],[1,"fas","fa-spinner","fa-spin"]],template:function(e,a){e&1&&(i(0,"div",0)(1,"h2"),p(2,"R\xE9initialiser le mot de passe"),n(),w(3,j,3,1,"div",1)(4,G,19,16,"form",2)(5,Y,2,0,"div",3),n()),e&2&&(o(3),d("ngIf",a.message),o(),d("ngIf",!a.message&&a.email),o(),d("ngIf",!a.email))},dependencies:[S,M,W,L,E,V,O,N,A,k,T],styles:[".auth-container[_ngcontent-%COMP%]{max-width:400px;margin:4rem auto;padding:2rem;background:#fff;border-radius:8px;box-shadow:0 4px 6px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:500}input[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #ddd;border-radius:4px}.btn-primary[_ngcontent-%COMP%]{width:100%;padding:.75rem;background:#000;color:#fff;border:none;border-radius:4px;cursor:pointer}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.error[_ngcontent-%COMP%]{color:#dc3545;margin-bottom:1rem;font-size:.875rem}.success[_ngcontent-%COMP%]{color:#28a745;margin-bottom:1rem;text-align:center}.password-wrapper[_ngcontent-%COMP%]{position:relative}.password-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-right:40px}.btn-toggle-password[_ngcontent-%COMP%]{position:absolute;right:10px;top:50%;transform:translateY(-50%);background:none;border:none;cursor:pointer;color:#666;padding:0}"]})};export{D as ResetPasswordComponent};
