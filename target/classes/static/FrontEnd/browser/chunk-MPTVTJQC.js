import{a as G}from"./chunk-YCGDO5T5.js";import{a as $}from"./chunk-FZA2A4RH.js";import{a as U}from"./chunk-BHV7ZWC6.js";import{a as B,c as W,f as R,s as Y}from"./chunk-GGHP7TD5.js";import{Ea as m,Fb as V,Gb as z,Hb as D,Jb as Q,Ka as c,Kb as A,La as o,Lb as N,Ma as i,Mb as F,Na as d,S as h,Sa as b,T as v,Ta as u,Ua as p,bb as s,cb as C,d as M,db as g,fb as y,gb as E,hb as k,ib as T,ma as w,mb as f,nb as j,oa as n,ob as O,pb as L,v as S,va as x,x as P,za as I}from"./chunk-OXYRPRF3.js";import"./chunk-FDERIQAA.js";function J(t,r){t&1&&(o(0,"div",11),d(1,"i",12),i())}function K(t,r){if(t&1){let e=b();o(0,"button",13),u("click",function(){h(e);let l=p();return v(l.clearSearch())}),d(1,"i",14),i()}}function X(t,r){t&1&&(o(0,"p"),s(1,"Vous n'avez pas encore pass\xE9 de commande."),i())}function Z(t,r){if(t&1&&(o(0,"p"),s(1),i()),t&2){let e=p(2);n(),g('Aucune commande trouv\xE9e correspondant \xE0 "',e.searchQuery,'".')}}function q(t,r){if(t&1&&(o(0,"div",15),m(1,X,2,0,"p",16)(2,Z,2,1,"p",16),i()),t&2){let e=p();n(),c("ngIf",!e.searchQuery),n(),c("ngIf",e.searchQuery)}}function ee(t,r){if(t&1&&(o(0,"div",28)(1,"div",29),d(2,"img",30),f(3,"imageUrl"),o(4,"span"),s(5),i()(),o(6,"span"),s(7),i(),o(8,"span"),s(9),f(10,"currency"),i()()),t&2){let e=r.$implicit;n(2),c("src",j(3,6,e.variant==null||e.variant.product==null||e.variant.product.images==null||e.variant.product.images[0]==null?null:e.variant.product.images[0].imageUrl)||"assets/placeholder.jpg",w),n(3),y("",e.variant==null||e.variant.product==null?null:e.variant.product.name," (",e.variant==null?null:e.variant.size," / ",e.variant==null?null:e.variant.color,")"),n(2),g("x",e.quantity),n(2),C(O(10,8,e.price,"TND"))}}function te(t,r){if(t&1&&(o(0,"div",31),d(1,"hr"),o(2,"small")(3,"strong"),s(4,"Livraison:"),i(),d(5,"br"),s(6),d(7,"br"),s(8),i()()),t&2){let e=p().$implicit;n(6),y(" ",e.address,", ",e.region," ",e.postalCode),n(2),g(" T\xE9l: ",e.phoneNumber," ")}}function ne(t,r){if(t&1&&(o(0,"div",19)(1,"div",20)(2,"div")(3,"span",21),s(4),i(),o(5,"div",22),s(6),f(7,"date"),i()(),o(8,"span",23),s(9),i()(),o(10,"div",24),m(11,ee,11,11,"div",25),i(),o(12,"div",26)(13,"strong"),s(14),f(15,"currency"),i(),m(16,te,9,4,"div",27),i()()),t&2){let e=r.$implicit;n(4),C(e.trackingCode||"En attente..."),n(2),g("Command\xE9 le ",O(7,7,e.orderDate,"medium")),n(2),c("ngClass",e.status.toLowerCase()),n(),C(e.status),n(2),c("ngForOf",e.orderLines),n(3),g("Total: ",O(15,10,e.totalAmount,"TND")),n(2),c("ngIf",e.address)}}function re(t,r){if(t&1&&(o(0,"div",17),m(1,ne,17,13,"div",18),f(2,"slice"),i()),t&2){let e=p();n(),c("ngForOf",L(2,1,e.filteredOrders,0,e.visibleLimit))}}function ie(t,r){if(t&1){let e=b();o(0,"button",35),u("click",function(){h(e);let l=p(2);return v(l.showAllOrders())}),s(1," Voir plus de commandes "),d(2,"i",36),i()}}function oe(t,r){if(t&1){let e=b();o(0,"button",37),u("click",function(){h(e);let l=p(2);return v(l.showLessOrders())}),s(1," Voir moins "),d(2,"i",38),i()}}function ae(t,r){if(t&1&&(o(0,"div",32),m(1,ie,3,0,"button",33)(2,oe,3,0,"button",34),i()),t&2){let e=p();n(),c("ngIf",e.visibleLimit<e.filteredOrders.length),n(),c("ngIf",e.visibleLimit>=e.filteredOrders.length)}}var H=class t{constructor(r,e){this.orderService=r;this.authService=e}orders=[];filteredOrders=[];loading=!0;searchQuery="";searchSubject=new M;searchSubscription;ngOnInit(){let r=this.authService.getCurrentUser();r&&this.orderService.getUserOrders(r.id).subscribe({next:e=>{this.orders=e,this.filteredOrders=e,this.loading=!1},error:e=>{console.error(e),this.loading=!1}}),this.searchSubscription=this.searchSubject.pipe(S(300),P()).subscribe(e=>{this.performSearch(e)})}ngOnDestroy(){this.searchSubscription&&this.searchSubscription.unsubscribe()}onSearchInput(r){this.searchSubject.next(r)}onSearch(){this.performSearch(this.searchQuery)}performSearch(r){if(!r||r.trim()===""){this.filteredOrders=this.orders;return}let e=r.toLowerCase();this.filteredOrders=this.orders.filter(a=>a.trackingCode&&a.trackingCode.toLowerCase().includes(e)||a.status&&a.status.toLowerCase().includes(e)||a.totalAmount&&a.totalAmount.toString().includes(e))}clearSearch(){this.searchQuery="",this.searchSubject.next(""),this.filteredOrders=this.orders}visibleLimit=2;showAllOrders(){this.visibleLimit=this.filteredOrders.length}showLessOrders(){this.visibleLimit=2,window.scrollTo({top:0,behavior:"smooth"})}static \u0275fac=function(e){return new(e||t)(x(G),x($))};static \u0275cmp=I({type:t,selectors:[["app-my-orders"]],decls:13,vars:6,consts:[[1,"container","fade-in"],["class","text-center",4,"ngIf"],[1,"search-section"],[1,"search-bar"],["type","text","placeholder","Rechercher des commandes (Code, Statut...)",3,"ngModelChange","keyup.enter","ngModel"],["class","clear-btn","title","Effacer la recherche",3,"click",4,"ngIf"],[1,"search-btn",3,"click"],[1,"fas","fa-search"],["class","empty-state",4,"ngIf"],["class","orders-list",4,"ngIf"],["class","view-more-container","style","text-align: center; margin-top: 1.5rem; display: flex; justify-content: center; gap: 1rem; padding-bottom: 2rem;",4,"ngIf"],[1,"text-center"],[1,"fas","fa-spinner","fa-spin","fa-2x"],["title","Effacer la recherche",1,"clear-btn",3,"click"],[1,"fas","fa-times"],[1,"empty-state"],[4,"ngIf"],[1,"orders-list"],["class","order-card",4,"ngFor","ngForOf"],[1,"order-card"],[1,"order-header"],[1,"order-id"],[1,"text-muted","small"],[1,"order-status",3,"ngClass"],[1,"order-body"],["class","order-line",4,"ngFor","ngForOf"],[1,"order-footer"],["class","delivery-details mt-2",4,"ngIf"],[1,"order-line"],[1,"d-flex","align-items-center","mb-2"],[2,"width","50px","height","50px","object-fit","cover","margin-right","10px",3,"src"],[1,"delivery-details","mt-2"],[1,"view-more-container",2,"text-align","center","margin-top","1.5rem","display","flex","justify-content","center","gap","1rem","padding-bottom","2rem"],["class","btn-primary","style","padding: 0.8rem 1.5rem; font-size: 1rem; border-radius: 50px;",3,"click",4,"ngIf"],["class","btn-secondary","style","padding: 0.8rem 1.5rem; font-size: 1rem; border-radius: 50px; background-color: #f8f9fa; color: #333; border: 1px solid #ddd;",3,"click",4,"ngIf"],[1,"btn-primary",2,"padding","0.8rem 1.5rem","font-size","1rem","border-radius","50px",3,"click"],[1,"fas","fa-arrow-down",2,"margin-left","0.5rem"],[1,"btn-secondary",2,"padding","0.8rem 1.5rem","font-size","1rem","border-radius","50px","background-color","#f8f9fa","color","#333","border","1px solid #ddd",3,"click"],[1,"fas","fa-arrow-up",2,"margin-left","0.5rem"]],template:function(e,a){e&1&&(o(0,"div",0)(1,"h2"),s(2,"Mes Commandes"),i(),m(3,J,2,0,"div",1),o(4,"div",2)(5,"div",3)(6,"input",4),T("ngModelChange",function(_){return k(a.searchQuery,_)||(a.searchQuery=_),_}),u("ngModelChange",function(_){return a.onSearchInput(_)})("keyup.enter",function(){return a.onSearch()}),i(),m(7,K,2,0,"button",5),o(8,"button",6),u("click",function(){return a.onSearch()}),d(9,"i",7),i()()(),m(10,q,3,2,"div",8)(11,re,3,5,"div",9)(12,ae,3,2,"div",10),i()),e&2&&(n(3),c("ngIf",a.loading),n(3),E("ngModel",a.searchQuery),n(),c("ngIf",a.searchQuery),n(3),c("ngIf",!a.loading&&a.filteredOrders.length===0),n(),c("ngIf",!a.loading&&a.filteredOrders.length>0),n(),c("ngIf",a.filteredOrders.length>2))},dependencies:[F,V,z,D,Y,B,W,R,N,A,Q,U],styles:[".container[_ngcontent-%COMP%]{padding:2rem;padding-top:100px;min-height:60vh}.order-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 4px 15px #0000000d;margin-bottom:1.5rem;padding:1.5rem;border:1px solid #eee}.order-card[_ngcontent-%COMP%]   .order-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;border-bottom:1px solid #eee;padding-bottom:1rem;margin-bottom:1rem;font-weight:500}.order-card[_ngcontent-%COMP%]   .order-header[_ngcontent-%COMP%]   .order-status[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:20px;font-size:.85rem}.order-card[_ngcontent-%COMP%]   .order-header[_ngcontent-%COMP%]   .order-status.pending[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.order-card[_ngcontent-%COMP%]   .order-header[_ngcontent-%COMP%]   .order-status.accepted[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.order-card[_ngcontent-%COMP%]   .order-header[_ngcontent-%COMP%]   .order-status.cancelled[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.order-card[_ngcontent-%COMP%]   .order-line[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:.5rem;color:#555}.order-card[_ngcontent-%COMP%]   .order-footer[_ngcontent-%COMP%]{border-top:1px solid #eee;padding-top:1rem;margin-top:1rem;text-align:right;font-size:1.2rem;color:#d4af37}.search-section[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:3rem}.search-section[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]{display:flex;align-items:center;background:#fff;border:1px solid #e0e0e0;border-radius:50px;padding:.5rem 1.5rem;width:100%;max-width:600px;box-shadow:0 2px 10px #00000008;transition:all .3s ease}.search-section[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]:focus-within{border-color:var(--color-accent);box-shadow:0 4px 20px #d4af371a;transform:translateY(-2px)}.search-section[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;outline:none;flex:1;font-family:var(--font-sans);font-size:1rem;padding:.3rem .5rem;color:var(--color-text);background:transparent}.search-section[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#aaa;font-weight:300}.search-section[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;color:#888;padding:.2rem;transition:all .2s;display:flex;align-items:center;justify-content:center}.search-section[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:var(--color-accent);transform:scale(1.1)}.search-section[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   button.clear-btn[_ngcontent-%COMP%]{margin-right:.5rem;font-size:.9rem;color:#ccc}.search-section[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   button.clear-btn[_ngcontent-%COMP%]:hover{color:#888}.search-section[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem}"]})};export{H as MyOrdersComponent};
