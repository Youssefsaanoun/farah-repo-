import{a as F}from"./chunk-FZA2A4RH.js";import{a as _,b as m,c as O,d as M,g as y,i as S,j as E,r as N,t as k}from"./chunk-GGHP7TD5.js";import{$a as f,Ea as h,Fb as w,Hb as C,Ka as l,La as t,Ma as o,Mb as x,Na as i,Ta as c,Ua as v,ab as b,bb as n,db as P,oa as a,va as p,za as u}from"./chunk-OXYRPRF3.js";import"./chunk-FDERIQAA.js";function I(d,s){if(d&1&&(t(0,"div"),i(1,"i",22),n(2),o()),d&2){let e=v();b("alert alert-"+e.messageType+" fade-in"),a(),l("ngClass",e.messageType==="success"?"fa-check-circle":"fa-exclamation-circle"),a(),P(" ",e.message," ")}}var z=class d{constructor(s,e){this.fb=s;this.authService=e;this.profileForm=this.fb.group({firstName:["",m.required],lastName:["",m.required],email:["",[m.required,m.email]],password:[""],oldPassword:[""]})}profileForm;user=null;message="";messageType="success";showPassword=!1;showOldPassword=!1;togglePassword(){this.showPassword=!this.showPassword}toggleOldPassword(){this.showOldPassword=!this.showOldPassword}ngOnInit(){this.user=this.authService.getCurrentUser(),this.user&&this.profileForm.patchValue({firstName:this.user.firstName,lastName:this.user.lastName,email:this.user.email})}onSubmit(){if(this.profileForm.invalid||!this.user?.id)return;let s=this.profileForm.value;if(s.password&&!s.oldPassword){this.message="Veuillez entrer votre ancien mot de passe pour modifier le mot de passe.",this.messageType="error";return}this.authService.updateProfile(this.user.id,s).subscribe({next:e=>{this.message="Profil mis \xE0 jour avec succ\xE8s !",this.messageType="success",this.authService.setCurrentUser(e),this.profileForm.patchValue({password:"",oldPassword:""})},error:e=>{if(console.error(e),e.error&&e.error.message)this.message=e.error.message;else if(e.error&&typeof e.error=="string")try{let r=JSON.parse(e.error);this.message=r.message||e.error}catch{this.message=e.error||"Erreur inconnue"}else this.message="\xC9chec de la mise \xE0 jour du profil. Veuillez v\xE9rifier vos informations.";this.messageType="error"}})}static \u0275fac=function(e){return new(e||d)(p(N),p(F))};static \u0275cmp=u({type:d,selectors:[["app-profile"]],decls:52,vars:13,consts:[[1,"page-container"],[1,"profile-card","fade-in"],[1,"card-header"],[1,"avatar-placeholder"],[1,"fas","fa-user"],[3,"class",4,"ngIf"],[1,"profile-form",3,"ngSubmit","formGroup"],[1,"form-section"],[1,"form-row"],[1,"form-group"],["type","text","formControlName","firstName","placeholder","Jane",1,"form-control"],["type","text","formControlName","lastName","placeholder","Doe",1,"form-control"],[1,"form-group","full-width"],["type","email","formControlName","email","placeholder","jane@example.com",1,"form-control"],[1,"divider"],[1,"password-wrapper"],["formControlName","oldPassword","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"form-control",3,"type"],["type","button",1,"btn-toggle-password",3,"click"],[1,"fas"],["formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"form-control",3,"type"],[1,"form-actions"],["type","submit",1,"btn","btn-primary","btn-save",3,"disabled"],[1,"fas",3,"ngClass"]],template:function(e,r){e&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),i(4,"i",4),o(),t(5,"h2"),n(6,"Mon Profil"),o(),t(7,"p"),n(8,"G\xE9rez les d\xE9tails de votre compte et vos pr\xE9f\xE9rences"),o()(),h(9,I,3,4,"div",5),t(10,"form",6),c("ngSubmit",function(){return r.onSubmit()}),t(11,"div",7)(12,"h3"),n(13,"Informations personnelles"),o(),t(14,"div",8)(15,"div",9)(16,"label"),n(17,"Pr\xE9nom"),o(),i(18,"input",10),o(),t(19,"div",9)(20,"label"),n(21,"Nom"),o(),i(22,"input",11),o()(),t(23,"div",12)(24,"label"),n(25,"Adresse Email"),o(),i(26,"input",13),o()(),i(27,"hr",14),t(28,"div",7)(29,"h3"),n(30,"S\xE9curit\xE9"),o(),t(31,"div",12)(32,"label"),n(33,"Ancien mot de passe "),t(34,"small"),n(35,"(Requis pour changer le mot de passe)"),o()(),t(36,"div",15),i(37,"input",16),t(38,"button",17),c("click",function(){return r.toggleOldPassword()}),i(39,"i",18),o()()(),t(40,"div",12)(41,"label"),n(42,"Nouveau mot de passe "),t(43,"small"),n(44,"(Laisser vide pour conserver le mot de passe actuel)"),o()(),t(45,"div",15),i(46,"input",19),t(47,"button",17),c("click",function(){return r.togglePassword()}),i(48,"i",18),o()()()(),t(49,"div",20)(50,"button",21),n(51," Enregistrer les modifications "),o()()()()()),e&2&&(a(9),l("ngIf",r.message),a(),l("formGroup",r.profileForm),a(27),l("type",r.showOldPassword?"text":"password"),a(2),f("fa-eye",!r.showOldPassword)("fa-eye-slash",r.showOldPassword),a(7),l("type",r.showPassword?"text":"password"),a(2),f("fa-eye",!r.showPassword)("fa-eye-slash",r.showPassword),a(2),l("disabled",r.profileForm.invalid||r.profileForm.pristine))},dependencies:[x,w,C,k,y,_,O,M,E,S],styles:[".page-container[_ngcontent-%COMP%]{padding:4rem 1rem;min-height:85vh;display:flex;justify-content:center;align-items:flex-start;background:linear-gradient(to bottom,var(--color-bg) 0%,#fff 100%)}.profile-card[_ngcontent-%COMP%]{background:#fff;width:100%;max-width:700px;border-radius:12px;box-shadow:0 15px 40px #00000014;padding:3rem 4rem;position:relative;overflow:hidden;border:1px solid rgba(0,0,0,.02)}@media(max-width:768px){.profile-card[_ngcontent-%COMP%]{padding:2rem}}.profile-card.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .6s ease-out forwards}.card-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:3rem}.card-header[_ngcontent-%COMP%]   .avatar-placeholder[_ngcontent-%COMP%]{width:80px;height:80px;background-color:var(--color-bg);border-radius:50%;margin:0 auto 1.5rem;display:flex;align-items:center;justify-content:center;font-size:2rem;color:var(--color-accent);border:2px solid var(--color-accent);box-shadow:0 5px 15px #d4af3733}.card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:var(--font-serif);font-size:2.2rem;color:var(--color-text);margin-bottom:.5rem}.card-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--color-text-light);font-family:var(--font-sans);font-size:1rem}.alert[_ngcontent-%COMP%]{padding:1rem;margin-bottom:2rem;border-radius:8px;font-size:.9rem;display:flex;align-items:center;justify-content:center;gap:.5rem}.alert.alert-success[_ngcontent-%COMP%]{background-color:#d4edda66;color:#155724;border:1px solid #c3e6cb}.alert.alert-error[_ngcontent-%COMP%]{background-color:#f8d7da66;color:#721c24;border:1px solid #f5c6cb}.alert[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%]{font-size:1.1rem}.profile-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}.profile-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;color:var(--color-text);border-left:3px solid var(--color-accent);padding-left:.8rem;margin-bottom:1.5rem}.profile-form[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{border:none;border-top:1px solid #eee;margin:0}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem}@media(max-width:600px){.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.8rem;font-weight:700;text-transform:uppercase;letter-spacing:.08em;margin-bottom:.6rem;color:var(--color-text-light)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-weight:400;color:#999;text-transform:none;margin-left:5px;font-size:.75rem}.form-control[_ngcontent-%COMP%]{padding:.8rem 1rem;border:1px solid #e0e0e0;border-radius:4px;font-family:var(--font-sans);font-size:1rem;transition:all .3s ease;background-color:#fdfdfd}.form-control[_ngcontent-%COMP%]:focus{border-color:var(--color-accent);background-color:#fff;box-shadow:0 0 0 3px #d4af3726;outline:none}.form-control[_ngcontent-%COMP%]::placeholder{color:#ccc}.password-wrapper[_ngcontent-%COMP%]{position:relative;width:100%}.password-wrapper[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{padding-right:40px}.password-wrapper[_ngcontent-%COMP%]   .btn-toggle-password[_ngcontent-%COMP%]{position:absolute;right:10px;top:50%;transform:translateY(-50%);background:none;border:none;color:var(--color-text-light);cursor:pointer;padding:5px;display:flex;align-items:center;justify-content:center;transition:color .3s;z-index:2}.password-wrapper[_ngcontent-%COMP%]   .btn-toggle-password[_ngcontent-%COMP%]:hover{color:var(--color-accent)}.password-wrapper[_ngcontent-%COMP%]   .btn-toggle-password[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}.btn-save[_ngcontent-%COMP%]{width:100%;padding:1rem;background-color:var(--color-text);color:#fff;font-family:var(--font-sans);text-transform:uppercase;font-weight:700;letter-spacing:.1em;border:1px solid var(--color-text);border-radius:4px;transition:all .3s;cursor:pointer;margin-top:1rem}.btn-save[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);background-color:var(--color-accent);border-color:var(--color-accent);box-shadow:0 5px 15px #00000026}.btn-save[_ngcontent-%COMP%]:disabled{background-color:#ddd;border-color:#ddd;cursor:not-allowed;opacity:.7}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}"]})};export{z as ProfileComponent};
