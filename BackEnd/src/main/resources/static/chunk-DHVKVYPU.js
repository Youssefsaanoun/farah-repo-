import{E as t,I as n,M as p,Rb as o,Vb as d,e as s}from"./chunk-MVKOQPDJ.js";var a=class i{constructor(r){this.http=r}apiUrl=`${d.apiUrl}/orders`;pendingOrdersCountSubject=new s(0);pendingOrdersCount$=this.pendingOrdersCountSubject.asObservable();placeOrder(r,e){return this.http.post(`${this.apiUrl}/${r}/place`,e).pipe(t(()=>this.refreshPendingOrders()))}getUserOrders(r){return this.http.get(`${this.apiUrl}/user/${r}`)}getAllOrders(){return this.http.get(`${this.apiUrl}/all`)}updateStatus(r,e){return this.http.put(`${this.apiUrl}/${r}/status`,{status:e}).pipe(t(()=>this.refreshPendingOrders()))}deleteOrder(r){return this.http.delete(`${this.apiUrl}/${r}`).pipe(t(()=>this.refreshPendingOrders()))}refreshPendingOrders(){this.getAllOrders().subscribe({next:r=>{let e=r.filter(l=>l.status==="PENDING").length;this.pendingOrdersCountSubject.next(e)},error:r=>console.error("Failed to refresh pending orders",r)})}static \u0275fac=function(e){return new(e||i)(p(o))};static \u0275prov=n({token:i,factory:i.\u0275fac,providedIn:"root"})};export{a};
